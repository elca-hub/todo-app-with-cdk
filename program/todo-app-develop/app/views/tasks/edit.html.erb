<% content_for :title, "ã‚¿ã‚¹ã‚¯ç·¨é›† - #{@task.name}" %>

<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  h1 { color: #333; }
  .form-container { 
    background-color: #f9f9f9; 
    padding: 20px; 
    margin: 20px 0; 
    border-radius: 5px; 
    border: 1px solid #ddd;
  }
  .form-group { 
    margin: 15px 0; 
  }
  label { 
    display: block; 
    margin-bottom: 5px; 
    font-weight: bold; 
    color: #555; 
  }
  input[type="text"], 
  input[type="date"], 
  textarea, 
  select { 
    width: 100%; 
    padding: 10px; 
    border: 1px solid #ddd; 
    border-radius: 3px; 
    font-size: 14px;
    box-sizing: border-box;
  }
  textarea { 
    height: 100px; 
    resize: vertical; 
  }
  select {
    height: 40px;
  }
  .btn { 
    padding: 10px 20px; 
    margin: 5px; 
    border: none; 
    border-radius: 5px; 
    text-decoration: none; 
    display: inline-block; 
    color: white; 
    font-weight: bold;
    cursor: pointer;
    font-size: 14px;
  }
  .btn-primary { background-color: #007bff; }
  .btn-success { background-color: #28a745; }
  .btn-secondary { background-color: #6c757d; }
  .btn:hover { opacity: 0.8; }
  .error-messages {
    background-color: #f8d7da;
    border: 1px solid #f5c6cb;
    color: #721c24;
    padding: 10px;
    border-radius: 5px;
    margin: 15px 0;
  }
  .error-messages ul {
    margin: 0;
    padding-left: 20px;
  }
  .current-info {
    background-color: #e9ecef;
    padding: 15px;
    border-radius: 5px;
    margin: 20px 0;
    border-left: 4px solid #007bff;
  }
</style>

<div style="margin-bottom: 20px;">
  <%= link_to "â† è©³ç´°ã«æˆ»ã‚‹", task_path(@task), class: "btn btn-secondary" %>
  <%= link_to "â† ä¸€è¦§ã«æˆ»ã‚‹", tasks_path, class: "btn btn-secondary" %>
</div>

<h1>ğŸ“ ã‚¿ã‚¹ã‚¯ç·¨é›†</h1>

<div class="current-info">
  <h3>ç¾åœ¨ã®ã‚¿ã‚¹ã‚¯æƒ…å ±</h3>
  <p><strong>ã‚¿ã‚¹ã‚¯å:</strong> <%= @task.name %></p>
  <p><strong>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:</strong> <%= @task.human_attribute_enum(:status) %></p>
  <% if @task.context.present? %>
    <p><strong>è©³ç´°:</strong> <%= truncate(@task.context, length: 100) %></p>
  <% end %>
  <p><strong>ä½œæˆæ—¥:</strong> <%= @task.created_at.strftime("%Yå¹´%mæœˆ%dæ—¥ %H:%M") %></p>
</div>

<div class="form-container">
  <%= form_with model: @task, local: true do |form| %>
    <% if @task.errors.any? %>
      <div class="error-messages">
        <h4><%= pluralize(@task.errors.count, "å€‹ã®ã‚¨ãƒ©ãƒ¼") %>ãŒã‚ã‚Šã¾ã™:</h4>
        <ul>
          <% @task.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="form-group">
      <%= form.label :name, "ã‚¿ã‚¹ã‚¯å *" %>
      <%= form.text_field :name, placeholder: "ä¾‹: è²·ã„ç‰©ã«è¡Œã", required: true %>
    </div>

    <div class="form-group">
      <%= form.label :context, "è©³ç´°ãƒ»ãƒ¡ãƒ¢" %>
      <%= form.text_area :context, placeholder: "ã‚¿ã‚¹ã‚¯ã®è©³ç´°ã‚„å‚™è€ƒã‚’è¨˜å…¥ã—ã¦ãã ã•ã„ï¼ˆä»»æ„ï¼‰" %>
    </div>

    <div class="form-group">
      <%= form.label :status, "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ *" %>
      <%= form.select :status, 
          options_for_select([
            ['æœªç€æ‰‹', 'pending'],
            ['é€²è¡Œä¸­', 'in_progress'], 
            ['å®Œäº†', 'completed']
          ], @task.status), 
          {}, 
          { required: true } %>
    </div>

    <div class="form-group">
      <%= form.label :deadline, "æœŸé™" %>
      <%= form.date_field :deadline %>
      <small style="color: #666; display: block; margin-top: 5px;">
        æœŸé™ã‚’è¨­å®šã—ãªã„å ´åˆã¯ç©ºç™½ã®ã¾ã¾ã«ã—ã¦ãã ã•ã„
      </small>
    </div>

    <div style="margin-top: 30px; text-align: center;">
      <%= form.submit "æ›´æ–°ã™ã‚‹", class: "btn btn-success" %>
      <%= link_to "ã‚­ãƒ£ãƒ³ã‚»ãƒ«", task_path(@task), class: "btn btn-secondary" %>
    </div>
  <% end %>
</div>

<div style="margin-top: 30px; padding: 15px; background-color: #fff3cd; border-radius: 5px; border: 1px solid #ffeaa7;">
  <h4 style="color: #856404; margin-top: 0;">ğŸ’¡ ç·¨é›†ã®ãƒ’ãƒ³ãƒˆ</h4>
  <ul style="color: #856404; margin-bottom: 0;">
    <li>ã‚¿ã‚¹ã‚¯åã¯å¿…é ˆé …ç›®ã§ã™</li>
    <li>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã€ã‚¿ã‚¹ã‚¯ã®é€²æ—ã‚’ç®¡ç†ã§ãã¾ã™</li>
    <li>æœŸé™ã‚’è¨­å®šã™ã‚‹ã¨ã€æœŸé™åˆ‡ã‚Œã®å ´åˆã«è­¦å‘ŠãŒè¡¨ç¤ºã•ã‚Œã¾ã™</li>
    <li>è©³ç´°æ¬„ã«ã¯ã€ã‚¿ã‚¹ã‚¯ã«é–¢ã™ã‚‹è¿½åŠ æƒ…å ±ã‚„ãƒ¡ãƒ¢ã‚’è¨˜å…¥ã§ãã¾ã™</li>
  </ul>
</div>

<hr style="margin: 30px 0;">
<p style="text-align: center; color: #666;">
  <small>Todo App - ã‚¿ã‚¹ã‚¯ç·¨é›†</small>
</p>
