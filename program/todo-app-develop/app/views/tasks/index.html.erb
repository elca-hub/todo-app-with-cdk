<% content_for :title, "Todo App" %>

<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  h1 { color: #333; }
  .task { 
    border: 1px solid #ddd; 
    padding: 10px; 
    margin: 10px 0; 
    border-radius: 5px; 
  }
  .completed { 
    background-color: #f0f8f0; 
    text-decoration: line-through; 
  }
  .new-task { 
    background-color: #f9f9f9; 
    padding: 15px; 
    margin: 20px 0; 
    border-radius: 5px; 
  }
  input, textarea { 
    width: 100%; 
    padding: 5px; 
    margin: 5px 0; 
  }
  button { 
    background-color: #007bff; 
    color: white; 
    padding: 8px 16px; 
    border: none; 
    border-radius: 3px; 
    cursor: pointer; 
  }
  button:hover { background-color: #0056b3; }
  .btn-edit { background-color: #28a745; }
  .btn-delete { background-color: #dc3545; }
  a { text-decoration: none; color: white; }
</style>
  <h1>ğŸ“ Todo App - ã‚¿ã‚¹ã‚¯ä¸€è¦§</h1>
  
  <!-- æ–°è¦ã‚¿ã‚¹ã‚¯ä½œæˆãƒœã‚¿ãƒ³ -->
  <div class="new-task">
    <h3>æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ </h3>
    <p>
      <%= link_to "æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆ", new_task_path, 
          style: "background-color: #007bff; color: white; padding: 8px 16px; border: none; border-radius: 3px; text-decoration: none; display: inline-block;" %>
    </p>
  </div>

  <!-- ã‚¿ã‚¹ã‚¯çµ±è¨ˆ -->
  <div style="background-color: #e9ecef; padding: 10px; border-radius: 5px; margin: 20px 0;">
    <strong>çµ±è¨ˆ:</strong>
    å…¨ã‚¿ã‚¹ã‚¯: <%= @tasks.count %>å€‹ | 
    å®Œäº†: <%= @tasks.select(&:completed?).count %>å€‹ | 
    æœªå®Œäº†: <%= @tasks.reject(&:completed?).count %>å€‹
  </div>

  <!-- ã‚¿ã‚¹ã‚¯ä¸€è¦§ -->
  <h2>ã‚¿ã‚¹ã‚¯ä¸€è¦§</h2>
  
  <% if @tasks.any? %>
    <% @tasks.each do |task| %>
      <div class="task <%= 'completed' if task.completed? %>">
        <h3>
          <%= task.completed? ? "âœ…" : "â°" %>
          <%= task.name %>
        </h3>

        <% if task.context.present? %>
          <p><strong>è©³ç´°:</strong> <%= task.context %></p>
        <% end %>
        
        <p>
          <small>
            ä½œæˆæ—¥: <%= task.created_at.strftime("%Yå¹´%mæœˆ%dæ—¥ %H:%M") %>
            <% if task.completed? %>
              | å®Œäº†æ—¥: <%= task.updated_at.strftime("%Yå¹´%mæœˆ%dæ—¥ %H:%M") %>
            <% end %>
          </small>
        </p>
        
        <div>
          <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º -->
          <span style="padding: 5px 10px; border-radius: 3px; font-size: 12px; font-weight: bold; 
                       background-color: <%= task.completed? ? '#d4edda' : '#fff3cd' %>; 
                       color: <%= task.completed? ? '#155724' : '#856404' %>;">
            <%= task.human_attribute_enum(:status) %>
          </span>
          
          <!-- è©³ç´°è¡¨ç¤º -->
          <%= link_to "è©³ç´°", task_path(task), 
              style: "background-color: #17a2b8; color: white; padding: 8px 16px; border-radius: 3px; text-decoration: none; display: inline-block; margin-left: 10px;" %>
          
          <!-- ç·¨é›† -->
          <%= link_to "ç·¨é›†", edit_task_path(task), 
              style: "background-color: #28a745; color: white; padding: 8px 16px; border-radius: 3px; text-decoration: none; display: inline-block; margin-left: 5px;" %>
          
          <!-- å‰Šé™¤ -->
          <%= link_to "å‰Šé™¤", task_path(task), 
              data: { 
                "turbo-method": "delete",
                "turbo-confirm": "æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ"
              },
              style: "background-color: #dc3545; color: white; padding: 8px 16px; border-radius: 3px; text-decoration: none; display: inline-block; margin-left: 5px;" %>
        </div>
      </div>
    <% end %>
  <% else %>
    <div style="text-align: center; padding: 50px; color: #666;">
      <h3>ğŸ“ ã¾ã ã‚¿ã‚¹ã‚¯ãŒã‚ã‚Šã¾ã›ã‚“</h3>
      <p>ä¸Šã®ãƒœã‚¿ãƒ³ã‹ã‚‰æœ€åˆã®ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>
    </div>
  <% end %>
  
  <hr style="margin: 30px 0;">
  <p style="text-align: center; color: #666;">
    <small>Todo App - ç°¡å˜ãªã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒª</small>
  </p>