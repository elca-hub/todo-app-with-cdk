<% content_for :title, "ã‚¿ã‚¹ã‚¯è©³ç´° - #{@task.name}" %>

<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  h1 { color: #333; }
  .task-detail { 
    border: 1px solid #ddd; 
    padding: 20px; 
    margin: 20px 0; 
    border-radius: 5px; 
    background-color: #f9f9f9;
  }
  .completed { 
    background-color: #f0f8f0; 
  }
  .task-info { 
    margin: 15px 0; 
  }
  .task-info strong { 
    display: inline-block; 
    width: 100px; 
    color: #555; 
  }
  .status-badge { 
    padding: 8px 15px; 
    border-radius: 5px; 
    font-size: 14px; 
    font-weight: bold; 
    margin: 10px 0;
    display: inline-block;
  }
  .btn-group { 
    margin: 20px 0; 
  }
  .btn { 
    padding: 10px 20px; 
    margin: 5px; 
    border-radius: 5px; 
    text-decoration: none; 
    display: inline-block; 
    color: white; 
    font-weight: bold;
  }
  .btn-primary { background-color: #007bff; }
  .btn-success { background-color: #28a745; }
  .btn-danger { background-color: #dc3545; }
  .btn-secondary { background-color: #6c757d; }
  .btn:hover { opacity: 0.8; }
</style>

<div style="margin-bottom: 20px;">
  <%= link_to "â† ä¸€è¦§ã«æˆ»ã‚‹", tasks_path, class: "btn btn-secondary" %>
</div>

<h1>ğŸ“ ã‚¿ã‚¹ã‚¯è©³ç´°</h1>

<div class="task-detail <%= 'completed' if @task.completed? %>">
  <h2>
    <%= @task.completed? ? "âœ…" : "â°" %>
    <%= @task.name %>
  </h2>

  <div class="task-info">
    <strong>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:</strong>
    <span class="status-badge" style="background-color: <%= @task.completed? ? '#d4edda' : '#fff3cd' %>; 
                                     color: <%= @task.completed? ? '#155724' : '#856404' %>;">
      <%= @task.human_attribute_enum(:status) %>
    </span>
  </div>

  <% if @task.context.present? %>
    <div class="task-info">
      <strong>è©³ç´°:</strong>
      <div style="margin-top: 5px; padding: 10px; background-color: white; border-radius: 3px; border: 1px solid #eee;">
        <%= simple_format(@task.context) %>
      </div>
    </div>
  <% else %>
    <div class="task-info">
      <strong>è©³ç´°:</strong>
      <span style="color: #999; font-style: italic;">è©³ç´°ã¯è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã›ã‚“</span>
    </div>
  <% end %>

  <% if @task.deadline.present? %>
    <div class="task-info">
      <strong>æœŸé™:</strong>
      <%= @task.deadline.strftime("%Yå¹´%mæœˆ%dæ—¥") %>
      <% if @task.deadline < Date.current && !@task.completed? %>
        <span style="color: #dc3545; font-weight: bold;">ï¼ˆæœŸé™åˆ‡ã‚Œï¼‰</span>
      <% end %>
    </div>
  <% end %>

  <div class="task-info">
    <strong>ä½œæˆæ—¥:</strong>
    <%= @task.created_at.strftime("%Yå¹´%mæœˆ%dæ—¥ %H:%M") %>
  </div>

  <% if @task.updated_at != @task.created_at %>
    <div class="task-info">
      <strong>æ›´æ–°æ—¥:</strong>
      <%= @task.updated_at.strftime("%Yå¹´%mæœˆ%dæ—¥ %H:%M") %>
    </div>
  <% end %>

  <% if @task.completed? %>
    <div class="task-info">
      <strong>å®Œäº†æ—¥:</strong>
      <%= @task.updated_at.strftime("%Yå¹´%mæœˆ%dæ—¥ %H:%M") %>
    </div>
  <% end %>
</div>

<div class="btn-group">
  <%= link_to "ç·¨é›†", edit_task_path(@task), class: "btn btn-success" %>
  
  <%= link_to "å‰Šé™¤", task_path(@task), 
      data: { 
        "turbo-method": "delete",
        "turbo-confirm": "æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿã“ã®ã‚¿ã‚¹ã‚¯ã€Œ#{@task.name}ã€ã¯å®Œå…¨ã«å‰Šé™¤ã•ã‚Œã¾ã™ã€‚"
      },
      class: "btn btn-danger" %>
  
  <%= link_to "ä¸€è¦§ã«æˆ»ã‚‹", tasks_path, class: "btn btn-primary" %>
</div>

<hr style="margin: 30px 0;">
<p style="text-align: center; color: #666;">
  <small>Todo App - ã‚¿ã‚¹ã‚¯è©³ç´°</small>
</p>
